<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Na Bangaram ‚ù§Ô∏è</title>
  <style>
    :root{
      --bg:#0b0b0b;
      --accent:#c1121f; /* red */
      --accent-2:#1b1b1b; /* near-black */
      --muted:#e9e3e3;
      --glass: rgba(255,255,255,0.03);
      --card: rgba(255,255,255,0.03);
      font-family: 'Segoe UI', Roboto, system-ui, -apple-system, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#050505 0%, #0f0f0f 100%);color:var(--muted)}
    .page{min-height:100%;display:flex;flex-direction:column;align-items:center;padding:28px}

    /* Header */
    header{width:100%;max-width:980px;display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
    .title{
      display:flex;align-items:center;gap:14px
    }
    .heart{
      width:72px;height:72px;border-radius:18px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#8f0f12);box-shadow:0 10px 30px rgba(193,18,31,0.18);transform:rotate(-8deg);
    }
    .heart svg{filter:drop-shadow(0 6px 18px rgba(193,18,31,0.28))}
    h1{font-size:28px;margin:0;line-height:1;color:var(--muted)}
    p.lead{margin:0;color:#ffd6d6;opacity:0.95}

    /* Controls */
    .controls{display:flex;gap:10px}
    button{background:var(--card);border:1px solid rgba(255,255,255,0.04);padding:10px 12px;border-radius:12px;color:var(--muted);cursor:pointer;font-weight:600}
    button.primary{background:linear-gradient(90deg,var(--accent),#b71b22);color:white}

    /* Card */
    .card{width:100%;max-width:980px;background:var(--glass);border-radius:16px;padding:18px;border:1px solid rgba(255,255,255,0.02);box-shadow:0 10px 30px rgba(0,0,0,0.6)}

    /* Intro */
    .intro{display:flex;gap:18px;align-items:center}
    .avatar{width:140px;height:140px;border-radius:16px;background:linear-gradient(180deg, rgba(193,18,31,0.12), rgba(0,0,0,0.2));display:grid;place-items:center;font-weight:700;color:var(--muted)}
    .blurb{flex:1}
    .bigmsg{font-size:20px;margin:0 0 6px 0;color:#ffd2d2}
    .sub{opacity:0.9;margin:0}

    /* Gallery */
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-top:14px}
    .thumb{height:120px;border-radius:12px;background:linear-gradient(180deg,#111,#0b0b0b);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;border:1px solid rgba(255,255,255,0.03)}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .thumb .label{position:absolute;left:8px;bottom:8px;background:rgba(0,0,0,0.35);padding:6px 8px;border-radius:10px;font-size:12px}

    .dropzone{border:2px dashed rgba(193,18,31,0.18);border-radius:12px;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px;margin-top:12px}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,0,0,0.65),rgba(0,0,0,0.85));z-index:60}
    .lightbox img{max-width:90%;max-height:90%;border-radius:10px;box-shadow:0 30px 80px rgba(0,0,0,0.8)}
    .closeX{position:fixed;top:24px;right:24px;font-size:20px;background:transparent;border:none;color:white}

    /* Footer love note */
    .love-note{margin-top:16px;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(193,18,31,0.06), rgba(0,0,0,0.1));border:1px solid rgba(193,18,31,0.07)}

    /* small helpers */
    .muted{opacity:0.8;font-size:13px}
    input[type=file]{display:none}

    /* responsive */
    @media (max-width:520px){.avatar{width:96px;height:96px}.heart{width:56px;height:56px}}

    /* heart beat animation */
    @keyframes beat{0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)}}
    .pulse{animation:beat 1.2s infinite}
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="title">
        <div class="heart pulse" aria-hidden>
          <!-- simple heart -->
          <svg width="42" height="42" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21s-7.5-4.868-9.5-7.5C-0.2 8.8 5 4 8.5 6.5 10.2 7.9 12 10 12 10s1.8-2.1 3.5-3.5C19 4 24.2 8.8 21.5 13.5 19.5 16.132 12 21 12 21z" fill="white" opacity="0.95"></path>
          </svg>
        </div>
        <div>
          <h1>For <span id="lover-name">Na Bangaram</span> ‚ù§Ô∏è</h1>
          <p class="lead">A little corner made just for you ‚Äî romantic, cute, and full of memories.</p>
        </div>
      </div>
      <div class="controls">
        <label class="btn-upload" title="Add photos">
          <input id="fileInput" type="file" accept="image/*" multiple />
          <button>‚ûï Add Photos</button>
        </label>
        <label title="Add music">
          <input id="musicInput" type="file" accept="audio/*" />
          <button class="primary">üéµ Add Music</button>
        </label>
      </div>
    </header>

    <main class="card">
      <section class="intro">
        <div class="avatar" id="avatarPreview">Na<br>Bangaram</div>
        <div class="blurb">
          <p class="bigmsg">You're my light in the darkest nights.</p>
          <p class="sub muted">This page holds your photos, our little messages, and a tiny playlist we can add together. Tap any image to view larger.</p>

          <div class="love-note">
            <strong>From:</strong> <span id="from-name">Ravi</span> &nbsp;‚Ä¢&nbsp; <em>Handmade with love ‚ù§Ô∏è</em>
          </div>
        </div>
      </section>

      <section class="dropzone" id="dropzone">
        <div class="muted">Drag & drop photos here ‚Äî or click <strong>Add Photos</strong>. Images are stored only in your browser (local) and won‚Äôt be uploaded anywhere.</div>
        <small class="muted">Tip: You can rearrange photos by dragging thumbnails.</small>
      </section>

      <section class="gallery" id="gallery"></section>

    </main>

    <div style="max-width:980px; width:100%; display:flex;justify-content:space-between;gap:12px;align-items:center;margin-top:12px">
      <div class="muted">Made just for <strong id="footer-name">Na Bangaram</strong> ‚Ä¢ Open this file locally (no internet needed)</div>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="downloadBtn">üì• Save Page</button>
        <button id="clearBtn">üßπ Clear Photos</button>
      </div>
    </div>

    <!-- lightbox -->
    <div class="lightbox" id="lightbox" role="dialog" aria-hidden="true">
      <button class="closeX" id="closeLight">‚úï</button>
      <img id="lightImg" src="" alt="Large photo" />
    </div>

    <!-- audio player (hidden) -->
    <audio id="bgAudio" loop></audio>

  </div>

  <script>
    // Simple single-file love gallery with drag/drop, add music, lightbox
    const fileInput = document.getElementById('fileInput');
    const gallery = document.getElementById('gallery');
    const dropzone = document.getElementById('dropzone');
    const lightbox = document.getElementById('lightbox');
    const lightImg = document.getElementById('lightImg');
    const closeLight = document.getElementById('closeLight');
    const musicInput = document.getElementById('musicInput');
    const bgAudio = document.getElementById('bgAudio');
    const downloadBtn = document.getElementById('downloadBtn');
    const clearBtn = document.getElementById('clearBtn');

    // Load from localStorage if present
    let photos = [];
    try{photos = JSON.parse(localStorage.getItem('love_photos')||'[]')}catch(e){photos=[]}

    function saveState(){
      localStorage.setItem('love_photos', JSON.stringify(photos));
    }

    function render(){
      gallery.innerHTML='';
      photos.forEach((p,idx)=>{
        const el = document.createElement('div'); el.className='thumb';
        const img = document.createElement('img'); img.src = p; img.alt = 'Photo '+(idx+1);
        img.addEventListener('click', ()=>{ openLight(p) });
        el.appendChild(img);
        const label = document.createElement('div'); label.className='label'; label.textContent = (idx+1);
        el.appendChild(label);
        // drag
        el.draggable = true;
        el.addEventListener('dragstart', (e)=>{ e.dataTransfer.setData('text/plain', idx) });
        el.addEventListener('dragover', (e)=>{ e.preventDefault(); el.style.outline = '2px solid rgba(193,18,31,0.25)' });
        el.addEventListener('dragleave', ()=>{ el.style.outline = '' });
        el.addEventListener('drop', (e)=>{
          e.preventDefault(); el.style.outline='';
          const from = Number(e.dataTransfer.getData('text/plain'));
          const to = idx;
          if(!isNaN(from)){
            const item = photos.splice(from,1)[0];
            photos.splice(to,0,item);
            saveState(); render();
          }
        });
        gallery.appendChild(el);
      });
    }

    function openLight(src){
      lightImg.src = src; lightbox.style.display='flex'; lightbox.setAttribute('aria-hidden','false');
    }
    closeLight.addEventListener('click', ()=>{ lightbox.style.display='none'; lightbox.setAttribute('aria-hidden','true'); });
    lightbox.addEventListener('click', (e)=>{ if(e.target===lightbox) { lightbox.style.display='none'; lightbox.setAttribute('aria-hidden','true'); } });

    function handleFiles(list){
      Array.from(list).forEach(file=>{
        if(!file.type.startsWith('image/')) return;
        const reader = new FileReader();
        reader.onload = (ev)=>{ photos.push(ev.target.result); saveState(); render(); }
        reader.readAsDataURL(file);
      });
    }

    fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));

    dropzone.addEventListener('dragover',(e)=>{ e.preventDefault(); dropzone.style.borderColor='rgba(193,18,31,0.45)'; });
    dropzone.addEventListener('dragleave',()=>{ dropzone.style.borderColor='rgba(193,18,31,0.18)'; });
    dropzone.addEventListener('drop',(e)=>{ e.preventDefault(); dropzone.style.borderColor='rgba(193,18,31,0.18)'; handleFiles(e.dataTransfer.files); });

    // music
    musicInput.addEventListener('change', (e)=>{
      const f = e.target.files[0]; if(!f) return;
      const url = URL.createObjectURL(f);
      bgAudio.src = url; bgAudio.play().catch(()=>{});
      alert('Music added ‚Äî use your device player controls to pause/resume.');
    });

    // Save page (offer user to download full HTML with embedded images)
    downloadBtn.addEventListener('click', async ()=>{
      // create a new single-file HTML with current images embedded as base64 (they already are). We'll bake the images into the HTML.
      const doc = document.documentElement.outerHTML;
      const blob = new Blob([doc], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download = 'for_na_bangaram.html'; document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url),5000);
    });

    clearBtn.addEventListener('click', ()=>{ if(confirm('Clear all photos from this page? This only affects this browser and can be undone by re-adding photos.')){ photos=[]; saveState(); render(); } });

    // set names (you can change these directly)
    document.getElementById('lover-name').textContent = 'Na Bangaram';
    document.getElementById('footer-name').textContent = 'Na Bangaram';
    document.getElementById('from-name').textContent = 'Ravi';
    document.getElementById('avatarPreview').textContent = 'Na\nBangaram';

    // initial render
    render();

    // accessibility: keyboard close
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ lightbox.style.display='none'; lightbox.setAttribute('aria-hidden','true'); } });
  </script>
</body>
</html>
